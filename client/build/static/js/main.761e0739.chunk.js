(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(34)},22:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(4),c=a.n(l),o=(a(22),a(3)),i=(a(23),function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"nav-left"},r.a.createElement("h3",{className:"nav-title"},"File Uploader")),r.a.createElement("div",{className:"nav-right"},r.a.createElement("a",{className:"nav-item",href:"https://github.com/ac5tin/fileupload-go"},"Github")))}),s=a(15),u=a(2),m=a.n(u),d=a(7),f=a(8),p=a(6),E=a(14),h=function(e){var t=e.maxSize,a=void 0===t?1073741824:t,n=e.minSize,l=void 0===n?1:n,c=e.onDrop,o=void 0===c?function(){}:c,i=e.onReject,s=void 0===i?function(){}:i,u=r.a.useCallback(function(e){e.length&&o(e[0])},[o]);return r.a.createElement("span",null,r.a.createElement(E.a,{minSize:l,maxSize:a,onDrop:u,onDropRejected:function(e){return s(e)}},function(e){var t=e.getRootProps,n=e.getInputProps,l=e.isDragActive;return r.a.createElement("section",null,r.a.createElement("div",Object.assign({},t(),{className:"border p-1 filedropper"+(l?" dragging":"")}),r.a.createElement("input",n()),r.a.createElement(r.a.Fragment,null,l?r.a.createElement("p",null,"Drop your file here"):r.a.createElement("p",null,"Drag a file here (max size is ",Object(p.formatBytes)(a),") "))))}))},v=function(){var e=r.a.useState([]),t=Object(f.a)(e,2),a=t[0],n=t[1],l=r.a.useState(!1),c=Object(f.a)(l,2),i=c[0],u=c[1],E=function(){var e=Object(d.a)(m.a.mark(function e(t){var r,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(!0);case 2:(r=new WebSocket("ws://localhost:5000/ws")).binaryType="arraybuffer",(l=new FileReader).onload=function(){var e=Object(d.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.send(new Uint8Array(t.target.result));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.onopen=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.send(JSON.stringify({filename:t.name,size:t.size}));case 2:l.readAsArrayBuffer(t);case 3:case"end":return e.stop()}},e)})),r.onclose=function(){l=null},r.onmessage=function(e){var r=JSON.parse(e.data),l=r.result,c=r.id;"success"===l&&c?(o.a.success("Successfully uploaded file"),t.dlink="".concat("http://localhost:5000","/api/file/d/").concat(c),n([].concat(Object(s.a)(a),[t]))):o.a.error("Failed to upload file"),u(!1)};case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,i?null:r.a.createElement("div",{className:"row"},r.a.createElement(h,{onDrop:E,onReject:function(){o.a.error("Failed to upload file"),u(!1)},maxSize:parseInt("1073741824")})),a.length?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"File"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Link"),r.a.createElement("th",null,"Size"))),r.a.createElement("tbody",null,a.map(function(e){return r.a.createElement("tr",{key:e.name+String(e.size)},r.a.createElement("td",null,e.name),r.a.createElement("td",null,i?"Uploading ...":"Done"),r.a.createElement("td",null,e.dlink?r.a.createElement("a",{href:e.dlink,rel:"noopener noreferrer",target:"_blank"},e.dlink):""),r.a.createElement("td",null,Object(p.formatBytes)(e.size)))}))):null)},g=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section header"},r.a.createElement("h2",{className:"title"},"File Uploader")),r.a.createElement("div",{className:"section"},r.a.createElement("h3",{className:"subtitle"},"Simple file sharing"),r.a.createElement(v,null)))};a(32),a(33);o.a.configure({autoClose:3e3,hideProgressBar:!0});var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i,null),r.a.createElement("div",{className:"container"},r.a.createElement(g,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.761e0739.chunk.js.map